# Cloudflare Pages Redirects - GST Patent Management System
# Order matters! More specific rules MUST come first

# Static files with exact paths (highest priority)
/sw.js          /sw.js          200!
/manifest.json  /manifest.json  200!
/favicon.ico    /favicon.ico    200!
/robots.txt     /robots.txt     200!
/sitemap.xml    /sitemap.xml    200!

# API routes (preserve for Workers/Functions)
/tables/*  /tables/:splat  200!
/api/*     /api/:splat     200!

# Static asset directories (MUST NOT fallback to index.html)
# Use absolute paths with status code 200! to prevent HTML fallback
/css/:path    /css/:path      200!
/js/:path     /js/:path       200!
/images/:path /images/:path   200!
/assets/:path /assets/:path   200!
/fonts/:path  /fonts/:path    200!
/data/:path   /data/:path     200!
/db/:path     /db/:path       200!
/pdf/:path    /pdf/:path      200!

# HTML pages (preserve for direct access)
/pages/*    /pages/:splat    200!

# URL cleaning
/index.html   /              301
/home         /              301
/*/ /:splat                  301!

# Legacy redirects
/patent/*     /#patents      301
/search       /#patents      301
/docs/*       /pages/:splat  301

# HTTPS enforcement
http://gst-patents.com/*        https://gst-patents.com/:splat       301!
http://www.gst-patents.com/*    https://gst-patents.com/:splat       301!
https://www.gst-patents.com/*   https://gst-patents.com/:splat       301!

# SPA catch-all - MUST BE LAST
# Only catch routes WITHOUT file extensions (client-side routing)
# Static files (.js, .css, .json, etc.) should NOT fallback to index.html
/  /index.html  200
