<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŠ¹í—ˆ ë°ì´í„° ìë™ ì„í¬íŠ¸ - GST íŠ¹í—ˆ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .log-entry {
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            padding: 0.25rem 0.5rem;
            border-left: 3px solid #e5e7eb;
            margin-bottom: 0.25rem;
        }
        .log-info { border-left-color: #3b82f6; color: #1e40af; }
        .log-success { border-left-color: #10b981; color: #065f46; }
        .log-error { border-left-color: #ef4444; color: #991b1b; }
        .log-progress { border-left-color: #f59e0b; color: #92400e; }
        
        #logContainer {
            max-height: 400px;
            overflow-y: auto;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .progress-bar {
            height: 2rem;
            background: #e5e7eb;
            border-radius: 9999px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%);
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-600 to-blue-800 text-white shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-database text-3xl" aria-hidden="true"></i>
                    <div>
                        <h1 class="text-2xl font-bold">íŠ¹í—ˆ ë°ì´í„° ìë™ ì„í¬íŠ¸</h1>
                        <p class="text-sm text-blue-200">81ê°œ JSON íŒŒì¼ ìë™ ì²˜ë¦¬ ë° ì €ì¥</p>
                    </div>
                </div>
                <a href="../index.html" class="bg-white text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors">
                    <i class="fas fa-home mr-2" aria-hidden="true"></i>í™ˆìœ¼ë¡œ
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Status Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="stat-card">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-blue-200 text-sm">ì´ íŒŒì¼</p>
                        <p class="text-3xl font-bold" id="statTotal">81</p>
                    </div>
                    <i class="fas fa-file-alt text-4xl opacity-30" aria-hidden="true"></i>
                </div>
            </div>
            
            <div class="stat-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-red-100 text-sm">ê°€ì ¸ì˜´</p>
                        <p class="text-3xl font-bold" id="statFetched">0</p>
                    </div>
                    <i class="fas fa-download text-4xl opacity-30" aria-hidden="true"></i>
                </div>
            </div>
            
            <div class="stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-cyan-100 text-sm">íŒŒì‹±ë¨</p>
                        <p class="text-3xl font-bold" id="statParsed">0</p>
                    </div>
                    <i class="fas fa-cogs text-4xl opacity-30" aria-hidden="true"></i>
                </div>
            </div>
            
            <div class="stat-card" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-green-100 text-sm">ì €ì¥ë¨</p>
                        <p class="text-3xl font-bold" id="statSaved">0</p>
                    </div>
                    <i class="fas fa-check-circle text-4xl opacity-30" aria-hidden="true"></i>
                </div>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fas fa-chart-line mr-2 text-blue-600" aria-hidden="true"></i>
                ì²˜ë¦¬ ì§„í–‰ë¥ 
            </h2>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%">
                    <span id="progressText">0%</span>
                </div>
            </div>
            <div class="mt-2 text-sm text-gray-600 text-center" id="progressStatus">
                ì¤€ë¹„ ì¤‘...
            </div>
        </div>

        <!-- Control Panel -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-xl font-semibold mb-2">ì‹¤í–‰ ì œì–´</h2>
                    <p class="text-gray-600 text-sm">81ê°œ JSON íŒŒì¼ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•©ë‹ˆë‹¤.</p>
                </div>
                <button 
                    id="startButton" 
                    class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all shadow-lg flex items-center space-x-2"
                >
                    <i class="fas fa-play" aria-hidden="true"></i>
                    <span>ì„í¬íŠ¸ ì‹œì‘</span>
                </button>
            </div>
        </div>

        <!-- Log Container -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fas fa-terminal mr-2 text-green-600" aria-hidden="true"></i>
                ì²˜ë¦¬ ë¡œê·¸
            </h2>
            <div id="logContainer"></div>
        </div>

        <!-- Statistics -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <i class="fas fa-tags mr-2 text-purple-600" aria-hidden="true"></i>
                    ì¹´í…Œê³ ë¦¬ë³„ í†µê³„
                </h3>
                <div id="categoryStats" class="space-y-2">
                    <p class="text-gray-500 text-sm">ì²˜ë¦¬ê°€ ì‹œì‘ë˜ë©´ í†µê³„ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
                </div>
            </div>
            
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <i class="fas fa-info-circle mr-2 text-blue-600" aria-hidden="true"></i>
                    ìƒíƒœë³„ í†µê³„
                </h3>
                <div id="statusStats" class="space-y-2">
                    <p class="text-gray-500 text-sm">ì²˜ë¦¬ê°€ ì‹œì‘ë˜ë©´ í†µê³„ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; 2025 ê¸€ë¡œë²Œ ìŠ¤íƒ ë‹¤ë“œ í…Œí¬ë†€ë¡œì§€. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤
        function updateStat(id, value) {
            document.getElementById(id).textContent = value;
        }

        function updateProgress(current, total) {
            const percentage = (current / total * 100).toFixed(1);
            document.getElementById('progressBar').style.width = `${percentage}%`;
            document.getElementById('progressText').textContent = `${percentage}%`;
            document.getElementById('progressStatus').textContent = `${current} / ${total} íŒŒì¼ ì²˜ë¦¬ë¨`;
        }

        function addLog(message, type = 'info') {
            const logContainer = document.getElementById('logContainer');
            const timestamp = new Date().toLocaleTimeString('ko-KR');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            
            let icon = 'â„¹ï¸';
            if (type === 'success') icon = 'âœ…';
            else if (type === 'error') icon = 'âŒ';
            else if (type === 'progress') icon = 'ğŸ“ˆ';
            
            logEntry.textContent = `[${timestamp}] ${icon} ${message}`;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        function updateCategoryStats(stats) {
            const container = document.getElementById('categoryStats');
            container.innerHTML = '';
            
            const categories = {
                'scrubber': 'ìŠ¤í¬ëŸ¬ë²„',
                'chiller': 'ì¹ ëŸ¬',
                'plasma': 'í”Œë¼ì¦ˆë§ˆ',
                'temperature': 'ì˜¨ë„ ì œì–´',
                'gas-treatment': 'ê°€ìŠ¤ ì²˜ë¦¬',
                'other': 'ê¸°íƒ€'
            };
            
            for (const [key, label] of Object.entries(categories)) {
                const count = stats[key] || 0;
                const div = document.createElement('div');
                div.className = 'flex justify-between items-center py-2 border-b';
                div.innerHTML = `
                    <span class="text-gray-700">${label}</span>
                    <span class="font-semibold text-blue-600">${count}ê°œ</span>
                `;
                container.appendChild(div);
            }
        }

        function updateStatusStats(stats) {
            const container = document.getElementById('statusStats');
            container.innerHTML = '';
            
            const statuses = {
                'active': 'í™œì„±',
                'expired': 'ë§Œë£Œ',
                'pending': 'ëŒ€ê¸°',
                'abandoned': 'í¬ê¸°'
            };
            
            for (const [key, label] of Object.entries(statuses)) {
                const count = stats[key] || 0;
                const div = document.createElement('div');
                div.className = 'flex justify-between items-center py-2 border-b';
                div.innerHTML = `
                    <span class="text-gray-700">${label}</span>
                    <span class="font-semibold text-green-600">${count}ê°œ</span>
                `;
                container.appendChild(div);
            }
        }

        // íŠ¹í—ˆ ë°ì´í„° íŒŒì‹± ë¡œì§ (data-parser.jsì™€ ë™ì¼)
        function extractPatentNumber(text) {
            const patterns = [
                /\(11\)\s*ë“±ë¡ë²ˆí˜¸\s*[:\s]*(\d{2}-\d{7,10})/i,
                /ë“±ë¡ë²ˆí˜¸\s*[:\s]*(\d{2}-\d{7,10})/i,
                /íŠ¹í—ˆë²ˆí˜¸\s*[:\s]*(\d{2}-\d{7,10})/i,
                /(\d{2}-\d{7,10})/
            ];
            
            for (const pattern of patterns) {
                const match = text.match(pattern);
                if (match && match[1]) return match[1].trim();
            }
            return null;
        }

        function extractDate(text, label) {
            const patterns = [
                new RegExp(`${label}\\s*[:\\s]*(\\d{4})ë…„\\s*(\\d{1,2})ì›”\\s*(\\d{1,2})ì¼`, 'i'),
                new RegExp(`${label}\\s*[:\\s]*(\\d{4})\\.(\\d{1,2})\\.(\\d{1,2})`, 'i'),
                new RegExp(`${label}\\s*[:\\s]*(\\d{4})-(\\d{1,2})-(\\d{1,2})`, 'i')
            ];
            
            for (const pattern of patterns) {
                const match = text.match(pattern);
                if (match) {
                    return `${match[1]}-${match[2].padStart(2, '0')}-${match[3].padStart(2, '0')}`;
                }
            }
            return null;
        }

        function extractInventors(text) {
            const patterns = [
                /\(72\)\s*ë°œëª…ì\s*[:\s]*([\s\S]*?)(?=\(\d+\)|$)/i,
                /ë°œëª…ì\s*[:\s]*([\s\S]*?)(?=\(\d+\)|$)/i
            ];
            
            for (const pattern of patterns) {
                const match = text.match(pattern);
                if (match && match[1]) {
                    const inventors = match[1].trim()
                        .split(/\n|;|,/)
                        .map(inv => inv.trim())
                        .filter(inv => inv.length > 0 && /[ê°€-í£]{2,}/.test(inv))
                        .slice(0, 10);
                    return inventors.length > 0 ? inventors : ['ì •ë³´ ì—†ìŒ'];
                }
            }
            return ['ì •ë³´ ì—†ìŒ'];
        }

        function extractAssignee(text) {
            const patterns = [
                /\(73\)\s*íŠ¹í—ˆê¶Œì\s*[:\s]*(.*?)(?:\n|$)/i,
                /íŠ¹í—ˆê¶Œì\s*[:\s]*(.*?)(?:\n|$)/i
            ];
            
            for (const pattern of patterns) {
                const match = text.match(pattern);
                if (match && match[1]) return match[1].trim() || 'ê¸€ë¡œë²Œ ìŠ¤íƒ ë‹¤ë“œ í…Œí¬ë†€ë¡œì§€';
            }
            return 'ê¸€ë¡œë²Œ ìŠ¤íƒ ë‹¤ë“œ í…Œí¬ë†€ë¡œì§€';
        }

        function extractIPCClassification(text) {
            const patterns = [
                /\(51\)\s*êµ­ì œíŠ¹í—ˆë¶„ë¥˜\(Int\.\s*Cl\.\)\s*[:\s]*(.*?)(?:\n|$)/i,
                /êµ­ì œíŠ¹í—ˆë¶„ë¥˜\s*[:\s]*(.*?)(?:\n|$)/i,
                /Int\.\s*Cl\.\s*[:\s]*(.*?)(?:\n|$)/i
            ];
            
            for (const pattern of patterns) {
                const match = text.match(pattern);
                if (match && match[1]) return match[1].trim();
            }
            return 'ì •ë³´ ì—†ìŒ';
        }

        function categorizePatent(title, fullText) {
            const combinedText = `${title} ${fullText}`.toLowerCase();
            
            const categories = {
                scrubber: ['ìŠ¤í¬ëŸ¬ë²„', 'scrubber', 'ì„¸ì •', 'ë°°ê¸°ê°€ìŠ¤', 'ì²˜ë¦¬ì¥ì¹˜'],
                chiller: ['ì¹ ëŸ¬', 'chiller', 'ëƒ‰ê°', 'ì˜¨ë„ì œì–´', 'ì—´êµí™˜'],
                plasma: ['í”Œë¼ì¦ˆë§ˆ', 'plasma', 'ë°©ì „', 'ì´ì˜¨í™”'],
                temperature: ['ì˜¨ë„', 'temperature', 'ê°€ì—´', 'ëƒ‰ê°', 'ì—´'],
                'gas-treatment': ['ê°€ìŠ¤', 'gas', 'ë°°ê¸°', 'ë°°ì¶œ', 'í¡ì°©']
            };
            
            for (const [category, keywords] of Object.entries(categories)) {
                for (const keyword of keywords) {
                    if (combinedText.includes(keyword)) return category;
                }
            }
            return 'other';
        }

        function extractTechnologyField(text) {
            const patterns = [
                /\(57\)\s*ìš”ì•½\s*[:\s]*([\s\S]*?)(?=\(|$)/i,
                /ê¸°ìˆ ë¶„ì•¼\s*[:\s]*([\s\S]*?)(?=\[|$)/i
            ];
            
            for (const pattern of patterns) {
                const match = text.match(pattern);
                if (match && match[1]) {
                    return match[1].trim().substring(0, 200) || 'ë°˜ë„ì²´ ì œì¡° ì¥ë¹„';
                }
            }
            return 'ë°˜ë„ì²´ ì œì¡° ì¥ë¹„';
        }

        function extractTechnicalKeywords(title, fullText) {
            const commonKeywords = [
                'ìŠ¤í¬ëŸ¬ë²„', 'ì¹ ëŸ¬', 'í”Œë¼ì¦ˆë§ˆ', 'ì˜¨ë„', 'ì œì–´', 'ê°€ìŠ¤', 'ì²˜ë¦¬',
                'ì„¸ì •', 'ëƒ‰ê°', 'ë°°ê¸°', 'ì‹œìŠ¤í…œ', 'ì¥ì¹˜', 'ë°©ë²•', 'ê³µì •',
                'ë°˜ë„ì²´', 'ì§„ê³µ', 'ì••ë ¥', 'ìœ ëŸ‰', 'ì„¼ì„œ', 'ë°¸ë¸Œ'
            ];
            
            const combinedText = `${title} ${fullText}`.toLowerCase();
            const foundKeywords = [];
            
            for (const keyword of commonKeywords) {
                if (combinedText.includes(keyword.toLowerCase())) {
                    foundKeywords.push(keyword);
                    if (foundKeywords.length >= 10) break;
                }
            }
            
            return foundKeywords.length > 0 ? foundKeywords : ['ë°˜ë„ì²´', 'ì œì¡°', 'ì¥ë¹„'];
        }

        function calculatePriorityScore(registrationDate, category) {
            let score = 5;
            
            if (registrationDate) {
                const regDate = new Date(registrationDate);
                const now = new Date();
                const yearsDiff = (now - regDate) / (1000 * 60 * 60 * 24 * 365);
                
                if (yearsDiff < 3) score += 3;
                else if (yearsDiff < 5) score += 2;
                else if (yearsDiff < 10) score += 1;
            }
            
            if (['scrubber', 'chiller', 'plasma'].includes(category)) score += 2;
            
            return Math.min(10, Math.max(1, score));
        }

        function extractMainClaims(fullText) {
            const patterns = [
                /\[ì²­êµ¬í•­.*?\]([\s\S]*?)(?=\[|$)/i,
                /ì²­êµ¬ì˜\s*ë²”ìœ„([\s\S]*?)(?=\[|$)/i
            ];
            
            for (const pattern of patterns) {
                const match = fullText.match(pattern);
                if (match && match[1]) {
                    return match[1].trim().substring(0, 2000) || 'ì²­êµ¬í•­ ì •ë³´ ì—†ìŒ';
                }
            }
            return 'ì²­êµ¬í•­ ì •ë³´ ì—†ìŒ';
        }

        function parsePatentFromJSON(jsonData) {
            const fullText = jsonData.pages.map(page => page.text || '').join('\n');
            const firstPageText = jsonData.pages[0]?.text || '';
            
            const patentNumber = extractPatentNumber(firstPageText);
            const registrationDate = extractDate(firstPageText, 'ë“±ë¡ì¼ì?');
            const applicationDate = extractDate(firstPageText, 'ì¶œì›ì¼ì?');
            const publicationDate = extractDate(firstPageText, 'ê³µê°œì¼ì?');
            const category = categorizePatent(jsonData.title, fullText);
            const technologyField = extractTechnologyField(firstPageText);
            const inventors = extractInventors(firstPageText);
            const assignee = extractAssignee(firstPageText);
            const ipcClassification = extractIPCClassification(firstPageText);
            const technicalKeywords = extractTechnicalKeywords(jsonData.title, fullText);
            const priorityScore = calculatePriorityScore(registrationDate, category);
            const mainClaims = extractMainClaims(fullText);
            
            const imageCount = jsonData.pages.reduce((count, page) => {
                return count + (page.images ? page.images.length : 0);
            }, 0);
            
            return {
                id: jsonData.doc_id,
                doc_id: jsonData.doc_id,
                patent_number: patentNumber || 'ì •ë³´ ì—†ìŒ',
                title: jsonData.title || 'ì œëª© ì—†ìŒ',
                abstract: technologyField,
                category: category,
                technology_field: technologyField,
                registration_date: registrationDate,
                application_date: applicationDate,
                publication_date: publicationDate,
                status: 'active',
                inventors: inventors,
                assignee: assignee,
                priority_score: priorityScore,
                technical_keywords: technicalKeywords,
                related_patents: [],
                main_claims: mainClaims,
                full_text: fullText.substring(0, 10000),
                page_count: jsonData.pages.length,
                source_path: jsonData.source_path || '',
                extraction_date: jsonData.created_at || new Date().toISOString(),
                ipc_classification: ipcClassification,
                legal_status: 'active',
                image_count: imageCount,
                vector_embedding_ready: true
            };
        }

        // ë©”ì¸ ì„í¬íŠ¸ í•¨ìˆ˜
        const JSON_FILES = [
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/cb75cb7b-c656-46cf-a845-697726d5bb5c',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/2e66c59f-6e95-4d79-8dca-1f19a7f79ae6',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/6e4d6cdb-1e12-4e12-963b-f044f30e1b22',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/2c24fcca-ea01-4cc6-a4a1-2ed7ea0c96d2',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/45b0dc15-d9d1-47df-b41e-f47b6af08c6c',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/88a86a53-9e03-4574-96d0-4982b73d0b6c',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/07f14d8d-e3ee-4ffd-b8ef-89cf46cf1002',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/5f23f9eb-5c7e-4c28-a89f-08ac8e3a5ba9',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/9e7b3a5b-6de0-4ac2-ac3e-a2ceb7c9e23b',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/19dc54f7-0e90-42bc-9e95-d7f52a804cf1',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/5b5d8dd0-2ede-4734-a8b7-ddca3e0beaa7',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/ad6d0844-cd34-4b3d-8734-a7ff9ead92da',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/1e29bd4b-3c4e-4f4f-b38c-0ae9c65f0dd7',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/e5d5bfcb-4f9d-4a01-aac7-58c8dc8a32a0',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/65f0ffdf-aa7d-469d-95e1-ac08b4b8c25c',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/c64a7805-19ed-43c2-b82e-2eeba1b2cae8',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/a7aadc53-c71a-46eb-bc4b-c21f44a44fdd',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/2dee6afc-fa07-4fba-bc15-6c2c3d27bb58',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/df36a9db-e2c3-41b6-a3ca-53c1b37e2f50',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/b52b1fab-e887-4c86-80b9-f4b9ebc9f9f5',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/1e7e54f2-ad5c-4a51-9d55-51d3eac93b3b',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/5a5ad0f1-7b9b-4e62-81ca-4a0a2e7f4c13',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/42f23a5a-ca4d-4a98-84fd-c5d84f8c20f6',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/a89cce09-82dd-4d6c-b756-40dcab8303f6',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/5e2d5bb5-f8f3-4d72-b07d-2f3333d9f2e7',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/e0c3bc75-d4ec-4aa5-9e46-51f3ef2fb34a',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/faac3a99-82f9-4a00-b62b-bb1c82c6cd1c',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/e48a5a67-d044-47e4-ba25-eee3d8cea38d',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/bd1bb71c-8c44-4e9d-84f4-6c6e50dd86d9',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/17bb3f7c-2f42-4e1c-803c-e4c3ea193d5b',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/2e3f8e51-d8f3-4aa3-870d-dd4b92a71e3f',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/0cb02844-12ef-4d5a-a24e-85bb8f42a823',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/5c99fb7e-b1a8-4d86-b5d6-f61a5bf03eb7',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/a6f81d9d-b0f8-437d-bd1d-a72f9b80d5ba',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/d5aee1e0-08e6-4f24-bbb6-81cd4a9f3577',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/fe7cbf5c-08f4-456a-8962-12abb2a7a1eb',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/53aac9b0-ea9a-400e-b77a-d4ee12f9db33',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/8a827ac7-4eaa-45e1-95bf-6bbdad6af9ba',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/3a0fc0db-9c69-4ff4-8801-4ad4e30f0e92',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/db6f8e50-8f19-4c71-be6b-64f7c03e77cd',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/e5764ae2-1dc5-4879-a8c9-6ea2a43a5b3d',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/05e17b5a-e3ea-49f5-9c78-f3b6deb6ec5e',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/14cf1bcb-d00d-449c-a2ef-9b58c2e5bed1',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/42b9e506-1c27-4e2c-8bcc-82cfce7dfa7b',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/28e9f0be-93b5-4e65-86eb-72fb1bbde6be',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/e6a2ef5a-38cc-414e-bbe5-0c0edc6eef1f',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/3fffd5ff-5a32-4f22-96c2-0e50b4d6d0ff',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/42c7e44f-c4c9-43a3-8e25-2e50e1f48dd2',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/d7e73ed1-d1bd-4e1e-819d-ca5cb9deeb0f',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/cc8a4fb4-3de8-4046-9b87-cf12e81bb74c',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/c653ab31-acde-493b-8ea1-2a6fd0db9ede',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/a36c5bac-0cf5-4e6b-a4b8-5f1da60595b7',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/66bcddbd-b868-4f6b-a091-bd5ad6fb6d0f',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/3f21e2b9-e5a6-4ac7-9e4b-5d0f8e9dc1f9',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/ba04c9f6-c831-4835-938e-a20fd8f5cc89',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/8f8c5c10-3e83-4e12-ba1e-7ba19dd0e5ba',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/f24d906f-87b8-47b5-b2b6-25e3c37af6a1',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/fb5f17cc-e5a5-4009-8eb2-1e5e5e55c844',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/b2ef2c9f-f4bd-4ed8-85b6-7e7c77eb8fcc',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/f44bb5b6-9f68-4e79-874a-bd3d2e55e8a4',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/82ce4906-6d81-4f9c-8b5a-21d6e72e1e5f',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/17e02cb3-62a9-47ba-a5f3-7cfdfcca9d35',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/9f3e1862-5d74-4cd2-b9be-6aa83e67aa59',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/79a68e36-fc3e-492c-947a-c8f82bc2db49',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/d5e79d7e-8c5e-4f50-9e0c-aab03b0c5e76',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/a7e06c93-4eb0-47fa-83c1-98f7e90d7f4e',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/6f9b01da-a9fa-4e0f-ba55-56ca1a8de7e3',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/e4e6c1b0-f4d6-473a-9ba1-f84e4f90b9e9',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/7e9a9fc2-4c22-443c-927d-3eb6df8fbfa0',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/c8e4ab81-0cbb-42a0-acc7-42e43c57e78f',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/e31c6c98-4e93-48f0-bbf4-3cfd39dcc7ac',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/3ee7ab78-e2e4-4c19-8f95-4dd3b4ed6e87',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/e8fdee04-7a9b-4dbb-a3c9-18a7eb46c18f',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/fbfa46e4-c914-4e6e-99c1-5bbe8c9e8b23',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/c91c5fdc-9adb-4394-89e5-1e2a4e78e2d8',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/97f9a5cb-f6ef-4e59-8d08-5fe7ec9dc1fb',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/79cdcf33-a21f-4076-bb28-3c1a4b07bc41',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/c8c91d5b-b74e-4d6e-8cef-2e1f2a9db1e3',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/fe3fffc2-b5f9-4d50-b3c0-f5c5dcc5e5e9',
            'https://gensparkstorageprodwest.blob.core.windows.net/web-drive/83d35741-5847-48e7-a7ce-5f573ee31fd2/4c5b4c2e-3e33-4e4e-87f7-5f2e1f6e5e9b'
        ];

        const stats = {
            total: JSON_FILES.length,
            fetched: 0,
            parsed: 0,
            saved: 0,
            errors: 0,
            byCategory: {},
            byStatus: {},
            startTime: null,
            endTime: null
        };

        async function processJSONFile(url, index) {
            try {
                addLog(`[${index + 1}/${stats.total}] JSON íŒŒì¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘...`);
                
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                stats.fetched++;
                updateStat('statFetched', stats.fetched);
                
                const jsonData = await response.json();
                addLog(`[${index + 1}/${stats.total}] íŒŒì‹± ì¤‘: ${(jsonData.title || 'Unknown').substring(0, 50)}...`);
                
                const patentData = parsePatentFromJSON(jsonData);
                stats.parsed++;
                updateStat('statParsed', stats.parsed);
                
                stats.byCategory[patentData.category] = (stats.byCategory[patentData.category] || 0) + 1;
                stats.byStatus[patentData.status] = (stats.byStatus[patentData.status] || 0) + 1;
                
                return patentData;
            } catch (error) {
                stats.errors++;
                addLog(`[${index + 1}/${stats.total}] ì˜¤ë¥˜: ${error.message}`, 'error');
                return null;
            }
        }

        async function saveBatchToDatabase(batch, batchIndex, totalBatches) {
            try {
                addLog(`ë°°ì¹˜ ${batchIndex + 1}/${totalBatches} ì €ì¥ ì¤‘ (${batch.length}ê°œ)...`);
                
                const response = await fetch('tables/patents', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(batch)
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                stats.saved += batch.length;
                updateStat('statSaved', stats.saved);
                addLog(`ë°°ì¹˜ ${batchIndex + 1}/${totalBatches} ì €ì¥ ì™„ë£Œ âœ…`, 'success');
                
                return true;
            } catch (error) {
                addLog(`ë°°ì¹˜ ì €ì¥ ì‹¤íŒ¨: ${error.message}`, 'error');
                return false;
            }
        }

        async function startImport() {
            const startButton = document.getElementById('startButton');
            startButton.disabled = true;
            startButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>ì²˜ë¦¬ ì¤‘...';
            
            stats.startTime = new Date();
            addLog('='.repeat(60));
            addLog('ğŸš€ íŠ¹í—ˆ ë°ì´í„° ìë™ ì„í¬íŠ¸ ì‹œì‘', 'success');
            addLog(`ğŸ“Š ì´ ${stats.total}ê°œ JSON íŒŒì¼ ì²˜ë¦¬ ì˜ˆì •`);
            addLog('='.repeat(60));
            
            const allPatents = [];
            
            for (let i = 0; i < JSON_FILES.length; i++) {
                const patentData = await processJSONFile(JSON_FILES[i], i);
                if (patentData) {
                    allPatents.push(patentData);
                }
                
                updateProgress(i + 1, stats.total);
                
                if ((i + 1) % 10 === 0) {
                    addLog(`ğŸ“ˆ ì§„í–‰ë¥ : ${((i + 1) / stats.total * 100).toFixed(1)}% (${i + 1}/${stats.total})`, 'progress');
                    updateCategoryStats(stats.byCategory);
                    updateStatusStats(stats.byStatus);
                }
            }
            
            addLog('='.repeat(60));
            addLog('ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì‹œì‘', 'success');
            addLog('='.repeat(60));
            
            const batchSize = 10;
            const batches = [];
            for (let i = 0; i < allPatents.length; i += batchSize) {
                batches.push(allPatents.slice(i, i + batchSize));
            }
            
            for (let i = 0; i < batches.length; i++) {
                await saveBatchToDatabase(batches[i], i, batches.length);
            }
            
            stats.endTime = new Date();
            const duration = ((stats.endTime - stats.startTime) / 1000).toFixed(2);
            
            addLog('='.repeat(60));
            addLog('âœ¨ íŠ¹í—ˆ ë°ì´í„° ì„í¬íŠ¸ ì™„ë£Œ!', 'success');
            addLog('='.repeat(60));
            addLog(`â±ï¸  ì†Œìš” ì‹œê°„: ${duration}ì´ˆ`);
            addLog(`ğŸ“„ ì´ íŒŒì¼: ${stats.total}ê°œ`);
            addLog(`âœ… ê°€ì ¸ì˜´: ${stats.fetched}ê°œ`);
            addLog(`âœ… íŒŒì‹±ë¨: ${stats.parsed}ê°œ`);
            addLog(`âœ… ì €ì¥ë¨: ${stats.saved}ê°œ`);
            addLog(`âŒ ì˜¤ë¥˜: ${stats.errors}ê°œ`);
            addLog('='.repeat(60));
            
            updateCategoryStats(stats.byCategory);
            updateStatusStats(stats.byStatus);
            
            startButton.disabled = false;
            startButton.innerHTML = '<i class="fas fa-check mr-2"></i>ì™„ë£Œ!';
            startButton.classList.remove('from-blue-600', 'to-purple-600');
            startButton.classList.add('from-green-600', 'to-green-700');
            
            setTimeout(() => {
                if (confirm('ì„í¬íŠ¸ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    window.location.href = '../index.html';
                }
            }, 2000);
        }

        document.getElementById('startButton').addEventListener('click', startImport);
    </script>
</body>
</html>
