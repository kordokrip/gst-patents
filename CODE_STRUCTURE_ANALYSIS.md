# GST íŠ¹í—ˆ ê´€ë¦¬ ì‹œìŠ¤í…œ - ì½”ë“œ êµ¬ì¡° ë¶„ì„ ë° ë¦¬íŒ©í† ë§ ì „ëµ

## ğŸ“Š íŒŒì¼ í¬ê¸° ë¶„ì„

```
ì´ ë¼ì¸ ìˆ˜: 7,722ì¤„
â”œâ”€â”€ js/legacy/patents.js          1,789ì¤„ (23.2%) - ë ˆê±°ì‹œ íŒ¨í„´ ë§¤ë‹ˆì €
â”œâ”€â”€ js/main.js                    1,385ì¤„ (17.9%) - ë©”ì¸ UI/ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
â”œâ”€â”€ js/patents-refactored.js      1,236ì¤„ (16.0%) - íŠ¹í—ˆ ë°ì´í„° ê´€ë¦¬ (í˜„ì¬)
â”œâ”€â”€ js/charts.js                    943ì¤„ (12.2%) - ì°¨íŠ¸/í†µê³„ ì‹œê°í™”
â”œâ”€â”€ js/enhanced-search.js           780ì¤„ (10.1%) - ê³ ê¸‰ ê²€ìƒ‰ ê¸°ëŠ¥
â”œâ”€â”€ js/timeline.js                  774ì¤„ (10.0%) - íƒ€ì„ë¼ì¸ ë§¤ë‹ˆì €
â”œâ”€â”€ js/legacy/data-parser.js        462ì¤„ (6.0%)  - ë ˆê±°ì‹œ ë°ì´í„° íŒŒì„œ
â”œâ”€â”€ js/legacy/api-client.js         238ì¤„ (3.1%)  - ë ˆê±°ì‹œ API í´ë¼ì´ì–¸íŠ¸
â”œâ”€â”€ js/debug-charts.js              115ì¤„ (1.5%)  - ë””ë²„ê·¸ ë„êµ¬
â””â”€â”€ js/api-client.js                  0ì¤„ (0.0%)  - ë¹ˆ íŒŒì¼
```

## ğŸ” íŒŒì¼ë³„ ìƒì„¸ ë¶„ì„

### 1. í•µì‹¬ íŒŒì¼ (í˜„ì¬ ì‚¬ìš© ì¤‘)

#### js/patents-refactored.js (1,236ì¤„)
**ëª©ì **: íŠ¹í—ˆ ë°ì´í„° ê´€ë¦¬ ë° ì •ê·œí™”
**ì£¼ìš” í´ë˜ìŠ¤**: `PatentManager`
**í•µì‹¬ ë©”ì„œë“œ**:
- `constructor()`: ì´ˆê¸°í™”
- `loadPatents()`: ë°ì´í„° ë¡œë“œ
- `normalizePatents()`: ë°ì´í„° ì •ê·œí™” â­
- `cleanInventors()`: ë°œëª…ì í•„í„°ë§ â­
- `normalizePriorityScore()`: ì ìˆ˜ ì •ê·œí™” â­
- `render()`: UI ë Œë”ë§
- `updateStats()`: í†µê³„ ì—…ë°ì´íŠ¸

**ë¬¸ì œì **: ê¸¸ì´ê°€ ê¸¸ê³ , ë°ì´í„° ì •ê·œí™” ë¡œì§ì´ ì¤‘ì•™ì§‘ì¤‘ì‹
**ê°œì„  ì œì•ˆ**: ë°ì´í„° ì •ê·œí™” ìœ í‹¸ë¦¬í‹° ë¶„ë¦¬

---

#### js/charts.js (943ì¤„)
**ëª©ì **: ì°¨íŠ¸ ë° í†µê³„ ì‹œê°í™”
**ì£¼ìš” í´ë˜ìŠ¤**: `ChartManager`
**í•µì‹¬ ë©”ì„œë“œ**:
- `init()`: ì´ˆê¸°í™”
- `getNormalizedInventors()`: ë°œëª…ì ì •ê·œí™” â­
- `getNormalizedStatus()`: ìƒíƒœê°’ ì •ê·œí™” â­
- `getNormalizedCategory()`: ì¹´í…Œê³ ë¦¬ ì •ê·œí™” â­
- `getCategoryDistribution()`: ì¹´í…Œê³ ë¦¬ ë¶„í¬
- `getInventorDistribution()`: ë°œëª…ì ë¶„í¬
- `getStatusDistribution()`: ìƒíƒœ ë¶„í¬
- `getPriorityScoreDistribution()`: ìš°ì„ ìˆœìœ„ ë¶„í¬

**ë¬¸ì œì **: ì •ê·œí™” ë¡œì§ì´ ì¤‘ë³µ (patents-refactored.jsì™€ ë¹„ìŠ·)
**ê°œì„  ì œì•ˆ**: ì •ê·œí™” ìœ í‹¸ë¦¬í‹° ê³µìœ 

---

#### js/main.js (1,385ì¤„)
**ëª©ì **: ë©”ì¸ UI ë° ì´ë²¤íŠ¸ í•¸ë“¤ë§
**ì£¼ìš” ê¸°ëŠ¥**:
- DOM ì´ˆê¸°í™” ë° ì´ë²¤íŠ¸ ë°”ì¸ë”©
- ê²€ìƒ‰ ë° í•„í„°ë§
- í˜ì´ì§€ë„¤ì´ì…˜
- íŒì—… ë° ëª¨ë‹¬ ê´€ë¦¬
- í…Œë§ˆ ì „í™˜

**ë¬¸ì œì **: ë„ˆë¬´ ë§ì€ ì±…ì„ì„ ê°€ì§ (ë‹¨ì¼ ì±…ì„ ì›ì¹™ ìœ„ë°°)
**ê°œì„  ì œì•ˆ**: ê¸°ëŠ¥ë³„ ëª¨ë“ˆë¡œ ë¶„ë¦¬

---

#### js/enhanced-search.js (780ì¤„)
**ëª©ì **: ê³ ê¸‰ ê²€ìƒ‰ ê¸°ëŠ¥
**ì£¼ìš” ê¸°ëŠ¥**:
- ê²€ìƒ‰ì–´ ìë™ì™„ì„±
- í•„í„°ë§ ë¡œì§
- ê²€ìƒ‰ ê²°ê³¼ ë­í‚¹

**ë¬¸ì œì **: main.jsì™€ ê¸°ëŠ¥ ê²¹ì¹¨
**ê°œì„  ì œì•ˆ**: í†µí•© ë˜ëŠ” ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬

---

#### js/timeline.js (774ì¤„)
**ëª©ì **: íƒ€ì„ë¼ì¸ ë° íŠ¹í—ˆ ìƒì„¸ë³´ê¸°
**ì£¼ìš” í´ë˜ìŠ¤**: `TimelineManager`
**ì£¼ìš” ë©”ì„œë“œ**:
- `refresh()`: íƒ€ì„ë¼ì¸ ê°±ì‹ 
- `viewPatentDetail()`: ìƒì„¸ë³´ê¸° ëª¨ë‹¬

**ìƒíƒœ**: ì˜ êµ¬ì¡°í™”ë¨

---

### 2. ë ˆê±°ì‹œ íŒŒì¼ (ì‚¬ìš©ë˜ì§€ ì•Šê±°ë‚˜ ì¤‘ë³µ)

#### js/legacy/patents.js (1,789ì¤„)
**ìƒíƒœ**: âš ï¸ ë ˆê±°ì‹œ ì½”ë“œ (í˜„ì¬ patents-refactored.jsë¡œ ëŒ€ì²´ë¨)
**ë¬¸ì œì **:
- ì‹œìŠ¤í…œì—ì„œ ì§ì ‘ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ
- patents-refactored.jsì™€ ì¤‘ë³µ
- ì•½ 550ì¤„ì˜ ìƒ˜í”Œ ë°ì´í„° í¬í•¨

**ê¶Œì¥ì‚¬í•­**: ì‚­ì œ ê°€ëŠ¥ (Git íˆìŠ¤í† ë¦¬ ë‚¨ìŒ)

---

#### js/legacy/data-parser.js (462ì¤„)
**ìƒíƒœ**: âš ï¸ ë ˆê±°ì‹œ ì½”ë“œ
**ê¸°ëŠ¥**: íŠ¹í—ˆ ë¬¸ì„œ íŒŒì‹±
**ë¬¸ì œì **:
- patents-refactored.jsì˜ normalizePatents()ë¡œ ëŒ€ì²´ë¨
- í˜„ì¬ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ

**ê¶Œì¥ì‚¬í•­**: í•„ìš”ì‹œ ì°¸ì¡°ìš©ìœ¼ë¡œ ë³´ê´€, ë¶ˆí•„ìš”í•˜ë©´ ì‚­ì œ

---

#### js/legacy/api-client.js (238ì¤„)
**ìƒíƒœ**: âš ï¸ ë ˆê±°ì‹œ ì½”ë“œ
**ê¸°ëŠ¥**: API í˜¸ì¶œ ê´€ë¦¬
**ë¬¸ì œì **: ë¯¸ì‚¬ìš© ìƒíƒœ

**ê¶Œì¥ì‚¬í•­**: ì‚­ì œ

---

#### js/api-client.js (0ì¤„)
**ìƒíƒœ**: âŒ ë¹ˆ íŒŒì¼
**ê¶Œì¥ì‚¬í•­**: ì‚­ì œ

---

#### js/debug-charts.js (115ì¤„)
**ìƒíƒœ**: âœ… ìœ ìš©í•œ ë””ë²„ê·¸ ë„êµ¬
**ê¸°ëŠ¥**: ì½˜ì†” ê²€ì¦ í•¨ìˆ˜
**ê¶Œì¥ì‚¬í•­**: ìœ ì§€ (í”„ë¡œë•ì…˜ì—ì„œëŠ” ì¡°ê±´ë¶€ ë¡œë“œ)

---

## ğŸ“‹ ì½”ë“œ ì •ë¦¬ ê³„íš

### Phase 1: ë ˆê±°ì‹œ ì½”ë“œ ì œê±°
```bash
# ì‚­ì œ ëŒ€ìƒ
rm js/legacy/patents.js         # 1,789ì¤„ (ì¤‘ë³µ)
rm js/legacy/data-parser.js     # 462ì¤„ (ë¯¸ì‚¬ìš©)
rm js/legacy/api-client.js      # 238ì¤„ (ë¯¸ì‚¬ìš©)
rm js/api-client.js             # 0ì¤„ (ë¹ˆ íŒŒì¼)
rm js/legacy/                   # ë ˆê±°ì‹œ í´ë” ì „ì²´

# ê²°ê³¼: 2,987ì¤„ ê°ì†Œ â†’ 4,735ì¤„ (ì•½ 38.7% ê°ì†Œ)
```

### Phase 2: ì½”ë“œ ì •ê·œí™” ìœ í‹¸ë¦¬í‹° ë¶„ë¦¬
**ìƒˆ íŒŒì¼: `js/utils/data-normalizer.js`**
```javascript
/**
 * ë°ì´í„° ì •ê·œí™” ìœ í‹¸ë¦¬í‹°
 * ì¤‘ë³µ ë¡œì§ì„ í•œ ê³³ì—ì„œ ê´€ë¦¬
 */

// PatentManager, ChartManagerì—ì„œ ì‚¬ìš©í•˜ëŠ” ì •ê·œí™” í•¨ìˆ˜ë“¤
export class DataNormalizer {
    static cleanInventors(inventors) { ... }
    static normalizePriorityScore(score) { ... }
    static parseRegistrationDate(dateStr) { ... }
    static normalizeStatus(status) { ... }
    static normalizeCategory(category) { ... }
}
```

**íš¨ê³¼**:
- ì¤‘ë³µ ë¡œì§ ì œê±° (ì•½ 150ì¤„ ê°ì†Œ)
- ì¼ê´€ëœ ë°ì´í„° ì²˜ë¦¬
- ìœ ì§€ë³´ìˆ˜ ìš©ì´

### Phase 3: main.js ê¸°ëŠ¥ ë¶„ë¦¬
**ìƒˆ íŒŒì¼ë“¤**:
- `js/modules/search-module.js`: ê²€ìƒ‰ ê¸°ëŠ¥
- `js/modules/ui-module.js`: UI ê´€ë¦¬
- `js/modules/event-module.js`: ì´ë²¤íŠ¸ í•¸ë“¤ë§

**íš¨ê³¼**:
- main.jsë¥¼ 600ì¤„ ì´í•˜ë¡œ ì¶•ì†Œ
- ê° ëª¨ë“ˆ ë‹¨ì¼ ì±…ì„
- í…ŒìŠ¤íŠ¸ ìš©ì´

### Phase 4: ìµœì¢… êµ¬ì¡°
```
js/
â”œâ”€â”€ patents-refactored.js    (900ì¤„ë¡œ ì¶•ì†Œ)
â”œâ”€â”€ charts.js                (800ì¤„ë¡œ ì¶•ì†Œ)
â”œâ”€â”€ main.js                  (600ì¤„ë¡œ ì¶•ì†Œ)
â”œâ”€â”€ enhanced-search.js       (ìœ ì§€)
â”œâ”€â”€ timeline.js              (ìœ ì§€)
â”œâ”€â”€ debug-charts.js          (ìœ ì§€)
â””â”€â”€ utils/
    â”œâ”€â”€ data-normalizer.js   (ìƒˆë¡œ ì¶”ê°€)
    â”œâ”€â”€ validation.js        (ìƒˆë¡œ ì¶”ê°€)
    â””â”€â”€ constants.js         (ìƒˆë¡œ ì¶”ê°€)

ì‚­ì œë¨:
â”œâ”€â”€ legacy/
â”œâ”€â”€ api-client.js
```

**ìµœì¢… ë¼ì¸ ìˆ˜**: ~3,500ì¤„ (ì•½ 54% ê°ì†Œ)

---

## ğŸ§ª ìœ ë‹› í…ŒìŠ¤íŠ¸ ê³„íš

### í…ŒìŠ¤íŠ¸ êµ¬ì¡°
```javascript
// js/tests/data-normalizer.test.js
describe('DataNormalizer', () => {
    describe('cleanInventors()', () => {
        it('should filter out address info', () => { ... })
        it('should remove "ì •ë³´ ì—†ìŒ"', () => { ... })
        it('should extract only names', () => { ... })
    })
    
    describe('normalizePriorityScore()', () => {
        it('should normalize to 1-10 range', () => { ... })
        it('should handle edge cases', () => { ... })
    })
    
    // ... ê¸°íƒ€ í…ŒìŠ¤íŠ¸
})
```

### í…ŒìŠ¤íŠ¸ ëŒ€ìƒ í•¨ìˆ˜
1. **cleanInventors()** â­â­â­
   - ì£¼ì†Œ ì •ë³´ ì œê±°
   - ì¤‘ë³µ ì œê±°
   - "ì •ë³´ ì—†ìŒ" í•„í„°ë§

2. **normalizePriorityScore()** â­â­â­
   - 1-10 ë²”ìœ„ ì •ê·œí™”
   - íƒ€ì… ë³€í™˜ (ë¬¸ìâ†’ìˆ«ì)
   - ê¸°ë³¸ê°’ ì²˜ë¦¬

3. **normalizeStatus()** â­â­
   - ìƒíƒœê°’ ë§¤í•‘
   - ë‹¤êµ­ì–´ ì§€ì›

4. **normalizeCategory()** â­â­
   - ì¹´í…Œê³ ë¦¬ ë§¤í•‘
   - ë¯¸ì§€ì •ê°’ ì²˜ë¦¬

5. **getStatusDistribution()** â­â­
   - ìƒíƒœë³„ ì¹´ìš´íŒ…
   - ì •ê·œí™”ëœ ìƒíƒœê°’ ì‚¬ìš©

6. **getCategoryDistribution()** â­â­
   - ì¹´í…Œê³ ë¦¬ë³„ ì¹´ìš´íŒ…
   - ë ˆì´ë¸”/ê°’ ì •ë ¬

---

## ğŸ”— ì˜ì¡´ì„± ë¶„ì„

```
patents-refactored.js (PatentManager)
â”œâ”€â”€ Depends on: JSON ë°ì´í„°
â”œâ”€â”€ Used by: main.js, charts.js, timeline.js
â””â”€â”€ Exports: window.patentManager

charts.js (ChartManager)
â”œâ”€â”€ Depends on: PatentManager.patents
â”œâ”€â”€ Depends on: Chart.js library
â”œâ”€â”€ Used by: main.js
â””â”€â”€ Exports: window.chartManager

main.js
â”œâ”€â”€ Depends on: PatentManager, ChartManager
â”œâ”€â”€ Depends on: HTML DOM
â”œâ”€â”€ Used by: index.html
â””â”€â”€ Exports: Global functions

enhanced-search.js
â”œâ”€â”€ Depends on: PatentManager.patents
â”œâ”€â”€ Used by: main.js
â””â”€â”€ Exports: Global search functions

timeline.js (TimelineManager)
â”œâ”€â”€ Depends on: PatentManager
â”œâ”€â”€ Used by: main.js (onclick handlers)
â””â”€â”€ Exports: window.timelineManager
```

---

## âœ… ë¦¬íŒ©í† ë§ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Phase 1: ë ˆê±°ì‹œ íŒŒì¼ ë°±ì—… ë° ì‚­ì œ
  - [ ] git tag v3.6.0-pre-refactor (í˜„ì¬ ìƒíƒœ ë°±ì—…)
  - [ ] ë ˆê±°ì‹œ íŒŒì¼ ì‚­ì œ
  - [ ] Git ì»¤ë°‹

- [ ] Phase 2: ë°ì´í„° ì •ê·œí™” ìœ í‹¸ë¦¬í‹° ë¶„ë¦¬
  - [ ] js/utils/data-normalizer.js ìƒì„±
  - [ ] patents-refactored.jsì—ì„œ ì •ê·œí™” ë¡œì§ ì´ë™
  - [ ] charts.jsì—ì„œ ì •ê·œí™” ë¡œì§ ì´ë™
  - [ ] ì„í¬íŠ¸ ê²½ë¡œ ìˆ˜ì •
  - [ ] í…ŒìŠ¤íŠ¸

- [ ] Phase 3: main.js ê¸°ëŠ¥ ë¶„ë¦¬
  - [ ] ëª¨ë“ˆ êµ¬ì¡° ì„¤ê³„
  - [ ] ê°œë³„ ëª¨ë“ˆ íŒŒì¼ ìƒì„±
  - [ ] ì´ë²¤íŠ¸ í†µí•©
  - [ ] í…ŒìŠ¤íŠ¸

- [ ] Phase 4: ìœ ë‹› í…ŒìŠ¤íŠ¸ ì¶”ê°€
  - [ ] Jest ë˜ëŠ” Vitest ì„¤ì¹˜
  - [ ] í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‘ì„±
  - [ ] í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° í†µê³¼

---

## ğŸ¯ ë¦¬íŒ©í† ë§ ìš°ì„ ìˆœìœ„

| ìˆœìœ„ | ì‘ì—… | ì˜í–¥ë„ | ë‚œì´ë„ | ì˜ˆìƒ ì‹œê°„ |
|------|------|--------|--------|----------|
| 1 | ë ˆê±°ì‹œ íŒŒì¼ ì‚­ì œ | ë†’ìŒ | ë‚®ìŒ | 10ë¶„ |
| 2 | ë°ì´í„° ì •ê·œí™” ìœ í‹¸ë¦¬í‹° ë¶„ë¦¬ | ë†’ìŒ | ì¤‘ê°„ | 1ì‹œê°„ |
| 3 | ìœ ë‹› í…ŒìŠ¤íŠ¸ ì¶”ê°€ | ë†’ìŒ | ì¤‘ê°„ | 2ì‹œê°„ |
| 4 | main.js ê¸°ëŠ¥ ë¶„ë¦¬ | ì¤‘ê°„ | ë†’ìŒ | 3ì‹œê°„ |

---

## ğŸ“ˆ ê¸°ëŒ€ íš¨ê³¼

### ì½”ë“œ í’ˆì§ˆ
- ì¤‘ë³µ ì½”ë“œ ì œê±° (150ì¤„)
- ë‹¨ì¼ ì±…ì„ ì›ì¹™ ì¤€ìˆ˜
- í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ì¦ê°€

### ìœ ì§€ë³´ìˆ˜ì„±
- íŒŒì¼ í¬ê¸° ê°ì†Œ (54%)
- ì˜ì¡´ì„± ëª…í™•í™”
- ëª¨ë“ˆì‹ êµ¬ì¡°

### ì„±ëŠ¥
- ë²ˆë“¤ í¬ê¸° ê°ì†Œ (ì•½ 20KB)
- ë¡œë“œ ì‹œê°„ ë‹¨ì¶•

### ê°œë°œ ìƒì‚°ì„±
- ë²„ê·¸ ì°¾ê¸° ìš©ì´
- ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ìš©ì´
- ì˜¨ë³´ë”© ì‹œê°„ ë‹¨ì¶•
